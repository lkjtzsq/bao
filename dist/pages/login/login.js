"use strict";loader.define(function(){$().ready(function(){$(".login").css("top",($(window).height()-$(".login").height())/2-40+"px")});var t={};return t.init=function(){var t=router.getPageParams();console.log(t),$("#login_submit").click(function(){var n=$("#uname").val(),e=$("#utel").val(),i=$("#code").val(),o=$("#region option:selected").val(),a=$("#duty").val();""==n?(bui.hint("用户名不能为空！"),$("#uname").focus()):/^1[0-9]{10}/.test(e)?""==i?(bui.hint("验证码不能为空！"),$("#code").focus()):0==o?bui.hint("请选择公司！"):bui.ajax({url:"http://qxbyd.cyol.com/api/register",data:{name:n,telephone:e,code:i,region:o,duty:a,wx_open_id:t.wx_open_id}}).then(function(n){if(console.log(n),n.data.token){bui.storage().set("token",n.data.token),router.load({url:"pages/main/main.html",param:{wx_open_id:t.wx_open_id}})}},function(t){console.log(t)}):(bui.hint("手机号格式不正确！"),$("#utel").focus())});var n=$("#btnSend"),e=bui.timer({onEnd:function(){n.removeClass("disabled").text("重新获取验证码")},onProcess:function(t){var e=t.count<10?"0"+t.count:t.count;n.text(e+"后重新获取")},times:60});n.on("click",function(t){$(this).hasClass("disabled")||($(this).addClass("disabled"),bui.hint("验证码发送成功"),e.restart())})},t.init(),t});