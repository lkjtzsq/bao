"use strict";loader.define(function(){$().ready(function(){$(".login").css("top",($(window).height()-$(".login").height())/2-40+"px")});var t={};return t.init=function(){var t=router.getPageParams();console.log(t),$("#login_submit").click(function(){var e=$("#uname").val(),n=$("#utel").val(),i=$("#code").val(),o=$("#region option:selected").val(),a=$("#duty").val();""==e?(bui.hint("用户名不能为空！"),$("#uname").focus()):/^1[0-9]{10}/.test(n)?""==i?(bui.hint("验证码不能为空！"),$("#code").focus()):0==o?bui.hint("请选择公司！"):bui.ajax({url:apiUrl+"api/register",data:{name:e,telephone:n,code:i,region:o,duty:a,wx_open_id:t.wx_open_id}}).then(function(e){if(console.log(e),e.data.token){bui.storage().set("token",e.data.token),router.load({url:"pages/main/main.html",param:{wx_open_id:t.wx_open_id}})}"验证码错误"==e.msg&&bui.hint("验证码错误")},function(t){console.log(t)}):(bui.hint("手机号格式不正确！"),$("#utel").focus())});var e=$("#btnSend"),n=bui.timer({onEnd:function(){e.removeClass("disabled").text("重新获取验证码")},onProcess:function(t){var n=t.count<10?"0"+t.count:t.count;e.text(n+"后重新获取")},times:60});e.on("click",function(t){if(/^1[0-9]{10}/.test($("#utel").val())){$(this).hasClass("disabled")||($(this).addClass("disabled"),bui.hint("验证码发送成功"),n.restart()),console.log($("#utel").val()),bui.ajax({url:apiUrl+"api/send_sms",data:{telephone:$("#utel").val()}}).then(function(t){console.log(t)})}else bui.hint("手机号格式不正确！")})},t.init(),t});